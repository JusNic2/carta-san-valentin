<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para ti 仇벒잺</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff4d6d">

<style>
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#ff4d6d,#ff8fa3);
  font-family:'Segoe UI',sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

.card{
  position:relative;
  z-index:2;
  width:90%;
  max-width:360px;
  background:rgba(255,255,255,.95);
  border-radius:22px;
  padding:25px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
  animation:fadeIn 1.3s ease;
}

h1{color:#ff4d6d}
p{color:#333;font-size:15px}

button{
  margin-top:15px;
  padding:12px 24px;
  border:none;
  border-radius:20px;
  background:#ff4d6d;
  color:#fff;
  font-size:16px;
}

.hidden{display:none}

/* Carrusel */
.carousel{
  margin-top:15px;
  position:relative;
  width:100%;
  height:200px;
  overflow:hidden;
  border-radius:15px;
}

.carousel img{
  width:100%;
  height:200px;
  object-fit:cover;
  position:absolute;
  inset:0;
  opacity:0;
  transition:opacity 1s;
}

.carousel img.active{opacity:1}

@keyframes fadeIn{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:scale(1)}
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="card">
  <h1>Para ti, B치rbara 仇벒잺</h1>
  <p>Aunque estemos lejos por ahora, mi coraz칩n siempre va contigo.</p>

  <button onclick="abrirCarta()">Abrir carta 游눏</button>

  <div id="contenido" class="hidden">
    <p id="texto"></p>

    <div class="carousel">
      <img src="foto1.jpg" class="active">
      <img src="foto2.jpg">
      <img src="foto3.jpg">
    </div>
  </div>
</div>

<audio id="musica" src="barbara.mp3" loop></audio>

<script>
/* Carta */
function abrirCarta(){
  document.getElementById("contenido").classList.remove("hidden");
  document.getElementById("musica").play();
  escribirTexto();
}

/* M치quina de escribir */
const mensaje = "Eres mi lugar seguro incluso a la distancia. Gracias por existir, mi ni침a. Te amo much칤simo 游눗";
let i=0;
function escribirTexto(){
  if(i<mensaje.length){
    document.getElementById("texto").innerHTML += mensaje.charAt(i);
    i++;
    setTimeout(escribirTexto,50);
  }
}

/* Carrusel */
const imgs=document.querySelectorAll(".carousel img");
let idx=0;
setInterval(()=>{
  imgs[idx].classList.remove("active");
  idx=(idx+1)%imgs.length;
  imgs[idx].classList.add("active");
},3000);

/* Corazones */
const c=document.getElementById("canvas");
const ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;
let corazones=[];
setInterval(()=>corazones.push({
  x:Math.random()*c.width,
  y:c.height+20,
  s:Math.random()*20+10,
  v:Math.random()*1+0.5
}),300);

function animar(){
  ctx.clearRect(0,0,c.width,c.height);
  corazones.forEach((h,i)=>{
    ctx.font=h.s+"px Arial";
    ctx.fillText("仇벒잺",h.x,h.y);
    h.y-=h.v;
    if(h.y<-30)corazones.splice(i,1);
  });
  requestAnimationFrame(animar);
}
animar();

/* PWA */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
